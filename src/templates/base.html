<!DOCTYPE html>
<html lang="{{ current_language() }}">
<head>
    <meta charset="utf-8">
    <title>{% block title %}{{ _('app_title') }}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="{{ url_for('static', filename='DashboardStyle.css') }}">
</head>

<body>
    <h1>PrintFleet V0.1</h1>
    <p><small class="mono">{{ _('refresh_interval_info') }}</small></p>

    <nav>
        <ul>
            <li style="margin-right: 1rem;">
                <img src="{{ url_for('static', filename='PrintFleetLogo200.png') }}"
                    alt="Logo"
                    style="height: 32px; width: auto; vertical-align: middle;">
            </li>

            <li>
                <a href="{{ url_for('index') }}"
                    class="{% if page == 'overview' %}active{% endif %}">
                    {{ _('menu_dashboard') }}
                </a>
            </li>
            <li>
                <a href="{{ url_for('settings_page') }}"
                    class="{% if page == 'settings' %}active{% endif %}">
                    {{ _('menu_settings') }}
                </a>
            </li>

            <!-- Theme selection -->
            <li class="theme-selector">
                <label for="themeSelect">{{ _('theme_label') }}</label>
                <select id="themeSelect">
                    <option value="default">{{ _('theme_default') }}</option>
                    <option value="theme-light-blue">{{ _('theme_light_blue') }}</option>
                    <option value="theme-dark-blue">{{ _('theme_dark_blue') }}</option>
                    <option value="theme-dark-teal">{{ _('theme_dark_teal') }}</option>
                </select>
            </li>

        </ul>
    </nav>

    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Theme-Script bleibt unverÃ¤ndert -->
    <script>
        (function() {
            const THEME_KEY = 'printfleet-theme';
            const body = document.body;
            const select = document.getElementById('themeSelect');

            const knownThemes = [
                'theme-light-blue',
                'theme-dark-blue',
                'theme-dark-teal'
            ];

            function applyTheme(theme) {
                knownThemes.forEach(t => body.classList.remove(t));
                if (theme && theme !== 'default') body.classList.add(theme);
            }

            const savedTheme = localStorage.getItem(THEME_KEY);

            if (savedTheme) {
                applyTheme(savedTheme);
                select.value = savedTheme;
            }

            select.addEventListener('change', function() {
                const value = this.value;
                applyTheme(value);
                localStorage.setItem(THEME_KEY, value);
            });
        })();
    </script>

</body>
</html>