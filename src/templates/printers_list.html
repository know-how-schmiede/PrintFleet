{% extends "base.html" %}

{% block title %}{{ _('printer_setup_title') }} â€“ PrintFleet{% endblock %}

{% block content %}
<h2>{{ _('printer_setup_title') }}</h2>

<p>
    <!-- Neuer Drucker -->
    <a href="{{ url_for('printers.printer_new') }}" class="btn">
        {{ _('printer_new_button') }}
    </a>

    <!-- Export Button -->
    <a href="{{ url_for('export.export_printers') }}" class="btn" style="margin-left: 1rem;">
        {{ _('btn_export_printers') }}
    </a>

    <div>
        <form
            method="post"
            action="{{ url_for('export.import_printers') }}"
            enctype="multipart/form-data"
            style="display: inline-block; margin-top: 0.5rem;"
        >
            <input
                type="file"
                name="file"
                accept=".json"
                required
            >
            <button type="submit" class="btn">
                {{ _('btn_import_printers') }}
            </button>
        </form>
    </div>
</p>



<table>
    <thead>
        <tr>
            <th>{{ _('printers_list_id') }}</th>
            <th>{{ _('printers_list_name') }}</th>
            <th>{{ _('printers_list_backend') }}</th>
            <th>{{ _('printers_list_host') }}</th>
            <th>{{ _('printers_list_port') }}</th>
            <th>{{ _('printers_list_https') }}</th>
            <th>{{ _('printers_list_enabled') }}</th>
            <th>{{ _('printers_list_actions') }}</th>
        </tr>
    </thead>
    <tbody>
    {% for p in printers %}
        <tr>
            <td>{{ p["id"] }}</td>
            <td>{{ p["name"] }}</td>
            <td>{{ p["backend"] }}</td>
            <td>{{ p["host"] }}</td>
            <td>{{ p["port"] }}</td>
            <td>{{ 'yes' if p["https"] else 'no' }}</td>
            <td>{{ 'yes' if p["enabled"] else 'no' }}</td>
            <td>
                <a href="{{ url_for('printers.printer_edit', printer_id=p['id']) }}" class="btn">
                    {{ _('printers_list_settings') }}
                </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}